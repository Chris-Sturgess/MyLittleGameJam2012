package Scripts{	import Scripts.*;	import flash.events.Event;	import flash.display.MovieClip;	import flash.display.Stage;	public class Boss extends MovieClip	{		var stageRef:Stage;		var commands:Array;		var currentMove:int;		var notFiring:Boolean = true;		var fireCount:int;		var side:int = 1;		var health = 1;		var engine:Engine;		var lasers:Array;		var speedY:int = 5;		var player:Player;		var facingLeft:Boolean = true;		var timeCount:int = 0;		var bulletSpeed = 20;				public function Boss(myStage:Stage, myEngine:Engine, laserArray:Array, mainPlayer:Player) {			addEventListener(Event.ENTER_FRAME, loop);			stageRef = myStage;			engine = myEngine;			lasers = laserArray;			player = mainPlayer;		}				public function loop(event:Event)		{			moveChar();			if (this.x > player.x && !facingLeft)			{				gotoAndStop(currentFrame - 1);				facingLeft = true;			}			else if (this.x < player.x && facingLeft)			{				gotoAndStop(currentFrame + 1);				facingLeft = false;			}			checkForHits();			timeCount ++;			if (timeCount == 8)			{				fire()			}			else if (timeCount == 16)			{				gotoAndStop(currentFrame - 2);				timeCount = 0;			}		}				public function moveChar()		{			this.y += speedY;			if (this.y > stage.stageHeight - 200 || this.y < 0)			{				speedY *= -1;			}		}				public function fire()		{			var bullet:Fireball;			var angle;			gotoAndStop(currentFrame + 2);			var xstart = Inner.FireBox.x + this.x;			var ystart = Inner.FireBox.y + this.y;			if (! facingLeft)			{				xstart += this.width - Inner.FireBox.x * 2			}			xstart = xstart - (player.HitBox.x + player.x);			ystart = ystart - (player.HitBox.y + player.y);			angle = Math.atan(xstart / ystart) - Math.PI/2;			xstart = Math.cos(angle) * bulletSpeed;			ystart = Math.sin(angle) * bulletSpeed;			player.y > this.y ? ystart *= -1 : xstart *= -1;			bullet = new Fireball(stageRef, xstart, ystart, player);			this.parent.addChild(bullet);			facingLeft ? bullet.x = Inner.FireBox.x + this.x : bullet.x = this.x - Inner.FireBox.x + this.width; 			bullet.y = Inner.FireBox.y + this.y;		}				public function takeHit()		{			health --;		}				public function die()		{			removeEventListener(Event.ENTER_FRAME, loop);			engine.bossDead = true;			this.parent.removeChild(this);		}				public function checkForHits()		{			if (health <= 0)			{				die();			}		}	}	}